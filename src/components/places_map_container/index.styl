@require '../../vars'

.z-places-map-container
  flex1()
  display: flex
  flex-direction: column
  position: relative
  user-select: none

  &.is-shell
    > .search
      // HACK: is it better to pass isShell to that component?
      > .z-places-filter-bar
        > .bar
          > .filters
            display: none

      > .z-places-search
        > .overlay
          display: none

  > .counts-bar
    font-caption1()
    display: none
    text-align: center
    z-index: 1
    position: absolute
    bottom: 0
    left: 0
    width: 100%
    padding: 4px
    box-sizing: border-box
    background: getColor('$tertiary0')

    &.is-visible
      display: block

  > .map
    flex1()
    display: flex
    position: relative

    > .legend-fab
      font-caption1()
      shadow-1()
      position: absolute
      bottom: 44px
      left: 12px
      background: getColor('$tertiary0')
      border-radius: 8px
      padding: 4px 8px
      cursor: pointer

    > .layers-fab
      position: absolute
      top: 16px
      right: 16px

    > .layers, > .legend
      shadow-1()
      position: absolute
      background: getColor('$tertiary0')
      border-radius: 8px
      padding: 12px 16px
      z-index: 99
      opacity: 0
      min-width: 240px
      min-height: 220px
      box-sizing: border-box
      transform: scale(0.5)
      opacity: 0
      pointer-events: none
      transform-origin: top right
      transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)

      &.is-visible
        pointer-events: all
        opacity: 1
        transform: scale(1)

        > .content
          opacity: 1

      > .content
        opacity: 0
        transition: opacity 0.2s
        transition-delay: 0.2s

    > .legend
      bottom: 44px
      left: 12px
      transform-origin: bottom left
      min-height: 80px

      > .item
        font-caption1()
        display: flex
        margin-bottom: 4px

        > .icon
          margin-right: 8px
          width: 24px
          height: 24px

    > .layers
      top: 16px
      right: 16px
      z-index: 1000

      > .content
        > .top
          display: flex
          align-items: flex-start

          > .title
            font-subhead2()
            margin-bottom: 8px

          > .settings
            margin-left: auto

        > .layer-icons
          > .g-grid
            > .g-cols

              > .layer-icon
                text-align: center
                cursor: pointer
                display: flex
                flex-direction: column
                align-items: center

                &.is-visible
                  > .icon
                    border: 2px solid getColor('$primary500')

                  > .name
                    color: getColor('$primary500')

                &:last-child
                  margin-right: 0

                > .icon
                  width: 48px
                  height: 48px
                  background-size: 100%
                  border-radius: 8px
                  border: 2px solid getColor('$black26')

                > .name
                  font-tiny(false)
                  margin-top: 4px
