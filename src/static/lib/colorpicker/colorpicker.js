/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.3.7
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
!function(t,e,n){function u(t){return"undefined"!=typeof t}function o(t){return"string"==typeof t}function s(t){return"object"==typeof t}function c(t){return Object.keys(t).length}function a(t,e,n){return e>t?e:t>n?n:t}function l(t,e){return parseInt(t,e||10)}function h(t){return Math.round(t)}function p(t){var i,f,u,o,s,c,a,l,e=+t[0],n=+t[1],r=+t[2];switch(o=Math.floor(6*e),s=6*e-o,c=r*(1-n),a=r*(1-s*n),l=r*(1-(1-s)*n),o=o||0,a=a||0,l=l||0,o%6){case 0:i=r,f=l,u=c;break;case 1:i=a,f=r,u=c;break;case 2:i=c,f=r,u=l;break;case 3:i=c,f=a,u=r;break;case 4:i=l,f=c,u=r;break;case 5:i=r,f=c,u=a}return[h(255*i),h(255*f),h(255*u)]}function v(t){return g(p(t))}function d(t){var o,e=+t[0],n=+t[1],r=+t[2],i=Math.max(e,n,r),f=Math.min(e,n,r),u=i-f,s=0===i?0:u/i,c=i/255;switch(i){case f:o=0;break;case e:o=n-r+u*(r>n?6:0),o/=6*u;break;case n:o=r-e+2*u,o/=6*u;break;case r:o=e-n+4*u,o/=6*u}return[o,s,c]}function g(t){var e=+t[2]|+t[1]<<8|+t[0]<<16;return e="000000"+e.toString(16),e.slice(-6)}function y(t){return d(x(t))}function x(t){return 3===t.length&&(t=t.replace(/./g,"$&$&")),[l(t[0]+t[1],16),l(t[2]+t[3],16),l(t[4]+t[5],16)]}function b(t){return[+t[0]/360,+t[1]/100,+t[2]/100]}function H(t){return[h(360*+t[0]),h(100*+t[1]),h(100*+t[2])]}function k(t){return[+t[0]/255,+t[1]/255,+t[2]/255]}function m(t){if(s(t))return t;var e=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(t),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(t),r="#"===t[0]&&t.match(/^#([\da-f]{3}|[\da-f]{6})$/i);return r?y(t.slice(1)):n?b([+n[1],+n[2],+n[3]]):e?d([+e[1],+e[2],+e[3]]):[0,1,1]}var r="__instance__",i="firstChild",f=setTimeout;!function(t){t.version="1.3.7",t[r]={},t.each=function(e,n){return f(function(){var i,n=t[r];for(i in n)e(n[i],i,n)},0===n?0:n||1),t},t.parse=m,t._HSV2RGB=p,t._HSV2HEX=v,t._RGB2HSV=d,t._HEX2HSV=y,t._HEX2RGB=function(t){return k(x(t))},t.HSV2RGB=function(t){return p(b(t))},t.HSV2HEX=function(t){return v(b(t))},t.RGB2HSV=function(t){return H(d(t))},t.RGB2HEX=g,t.HEX2HSV=function(t){return H(y(t))},t.HEX2RGB=x}(t[n]=function(l,h,d){function _(t,e,n){t=t.split(/\s+/);for(var r=0,i=t.length;i>r;++r)e.addEventListener(t[r],n,!1)}function B(t,e,n){t=t.split(/\s+/);for(var r=0,i=t.length;i>r;++r)e.removeEventListener(t[r],n)}function R(t,e){var n="touches",r="clientX",i="clientY",f=e[n]?e[n][0][r]:e[r],u=e[n]?e[n][0][i]:e[i],o=V(t);return{x:f-o.l,y:u-o.t}}function V(e){var n,r,i;return e===t?(n=t.pageXOffset||y.scrollLeft,r=t.pageYOffset||y.scrollTop):(i=e.getBoundingClientRect(),n=i.x,r=i.y),{l:n,t:r}}function G(t,e){for(;(t=t.parentElement)&&t!==e;);return t}function C(t){t&&t.preventDefault()}function M(e){return e===t?{w:t.innerWidth,h:t.innerHeight}:{w:e.offsetWidth,h:e.offsetHeight}}function $(t){return H||(u(t)?t:!1)}function L(t){H=t}function T(t,e,n){return u(t)?u(e)?(u(k[t])||(k[t]={}),u(n)||(n=c(k[t])),k[t][n]=e,x):k[t]:k}function j(t,e){return u(t)?u(e)?(delete k[t][e],x):(k[t]={},x):(k={},x)}function O(t,e,n){if(!u(k[t]))return x;if(u(n))u(k[t][n])&&k[t][n].apply(x,e);else for(var r in k[t])k[t][r].apply(x,e);return x}function et(t,e){t&&"h"!==t||O("change:h",e),t&&"sv"!==t||O("change:sv",e),O("change",e)}function nt(){return m.parentNode}function rt(n,r){function H(t){var e=t.target,n=e===l||G(e,l)===l;n?rt():x.exit(),O(n?"enter":"exit",[x])}function k(t){var n=(p(W),p([W[0],1,1]));z.style.backgroundColor="rgb("+n.join(",")+")",L(W),C(t)}function V(t){var e=a(R(Y,t).y,0,u);W[0]=(u-e)/u,A.style.top=e-c/2+"px",k(t)}function T(t){var e=R(z,t),n=a(e.x,0,o),r=a(e.y,0,s);W[1]=1-(o-n)/o,W[2]=(s-r)/s,D.style.right=o-n-y/2+"px",D.style.top=r-b/2+"px",k(t)}function j(t){q&&(V(t),Z=v(W),I||(O("drag:h",[Z,x]),O("drag",[Z,x]),et("h",[Z,x]))),F&&(T(t),Z=v(W),P||(O("drag:sv",[Z,x]),O("drag",[Z,x]),et("sv",[Z,x]))),I=0,P=0}function N(t){var e=t.target,n=q?"h":"sv",r=[v(W),x],i=e===l||G(e,l)===l,f=e===m||G(e,m)===m;i||f?f&&(O("stop:"+n,r),O("stop",r),et(n,r)):nt()&&h!==!1&&(x.exit(),O("exit",[x]),et(0,r)),q=0,F=0}function J(t){I=1,q=1,j(t),C(t),O("start:h",[Z,x]),O("start",[Z,x]),et("h",[Z,x])}function K(t){P=1,F=1,j(t),C(t),O("start:sv",[Z,x]),O("start",[Z,x]),et("sv",[Z,x])}n||((d||r||g).appendChild(m),x.visible=!0),Q=M(m).w,U=M(m).h;var i=M(z),f=M(D),u=M(Y).h,o=i.w,s=i.h,c=M(A).h,y=f.w,b=f.h;n?(m.style.left=m.style.top="-9999px",h!==!1&&_(h,l,H),x.create=function(){return rt(1),O("create",[x]),x},x.destroy=function(){return h!==!1&&B(h,l,H),x.exit(),L(!1),O("destroy",[x]),x}):it(),tt=function(){W=$(W),k(),A.style.top=u-c/2-u*+W[0]+"px",D.style.right=o-y/2-o*+W[1]+"px",D.style.top=s-b/2-s*+W[2]+"px"},x.exit=function(n){return nt()&&(nt().removeChild(m),x.visible=!1),B(w,Y,J),B(w,z,K),B(E,e,j),B(S,e,N),B(X,t,it),x},tt(),n||(_(w,Y,J),_(w,z,K),_(E,e,j),_(S,e,N),_(X,t,it))}function it(){return x.fit()}var g=e.body,y=e.documentElement,x=this,b=t[n],H=!1,k={},m=e.createElement("div"),w="touchstart mousedown",E="touchmove mousemove",S="touchend mouseup",X="orientationchange resize";if(!(x instanceof b))return new b(l,h);b[r][l.id||l.name||c(b[r])]=x,u(h)&&h!==!0||(h=w),L(b.parse(l.getAttribute("data-color")||l.value||[0,1,1])),m.className="color-picker",m.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var tt,N=m[i].children,W=$([0,1,1]),Y=N[0],z=N[1],A=Y[i],D=z[i],I=0,P=0,q=0,F=0,J=0,K=0,Q=0,U=0,Z=v(W);return rt(1),f(function(){var t=[v(W),x];O("create",t),et(0,t)},0),x.fit=function(e){var n=M(t),r=M(y),i=n.w-r.w,f=n.h-y.clientHeight,o=V(t),c=V(l);if(J=c.l+o.l,K=c.t+o.t+M(l).h,s(e))u(e[0])&&(J=e[0]),u(e[1])&&(K=e[1]);else{var h=o.l,p=o.t,v=o.l+n.w-Q-i,d=o.t+n.h-U-f;J=a(J,h,v)>>0,K=a(K,p,d)>>0}return m.style.left=J+"px",m.style.top=K+"px",O("fit",[x]),x},x.set=function(t){return u(t)?(o(t)&&(t=b.parse(t)),L(t),tt(),x):$()},x.get=function(t){return $(t)},x.target=l,x.picker=m,x.visible=!1,x.on=T,x.off=j,x.trigger=O,x.hooks=k,x.enter=function(t){return rt(0,t)},x})}(window,document,"CP");
